/// <reference types="node" resolution-mode="require"/>
import type { CommandResultMessage } from './CommandResultMessage.js';
import type { SubscriptionEvent } from './SubscriptionEvent.js';
import type { SubscriptionEventMessage } from './SubscriptionEventMessage.js';
import type { Server } from '../Server/index.js';
import { TypedEmitter } from '@mdingena/tiny-typed-emitter';
interface ServerConnectionEvents {
    close: (code?: number, reason?: Buffer) => void;
    error: (error: Error) => void;
    open: () => void;
}
export declare class ServerConnection extends TypedEmitter<ServerConnectionEvents> {
    server: Server;
    private commandId;
    private events;
    private subscribedEvents;
    private ws;
    constructor(server: Server, address: string, port: number, token: string);
    private getCommandId;
    send<T>(command: string): Promise<CommandResultMessage<T>>;
    private command;
    subscribe<T extends SubscriptionEvent>(event: T, callback: (message: SubscriptionEventMessage<T>) => void): Promise<CommandResultMessage<unknown>>;
    unsubscribe<T extends SubscriptionEvent>(event: T): Promise<CommandResultMessage<unknown>>;
    dispose(): void;
    disconnect(): void;
}
export {};
